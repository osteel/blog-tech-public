<!DOCTYPE html>
<html lang="en">
  <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
    <link rel="shortcut icon" type="image/x-icon" href="https://tech.osteel.me/favicon.ico" />

    <meta name="author" content="Yannick Chenot"/>
    <meta property="og:image" content="https://tech.osteel.me/images/2015/04/23/laravel-welcome.png" />

    <meta name="google-site-verification" content="KhtQOQ0ZVgZ55KSEoXMOWo_seu_e_JbV6xBk_SuewYI" />

    <title>How to start a new Laravel 5 project with Homestead - quick reference &mdash; osteel's blog</title>

    <meta charset="utf-8" />
    <link href="https://tech.osteel.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Full Atom Feed" />
    <link href="https://tech.osteel.me/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog Full RSS Feed" />
    <link href="https://tech.osteel.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Atom Feed" />
    <link href="https://tech.osteel.me/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog RSS Feed" />
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/poole.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/syntax.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/styles.css"/>




    <meta name="tags" contents="laravel" />
    <meta name="tags" contents="homestead" />

  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="https://tech.osteel.me/theme/img/profile.jpg"/>
    </div>
  </div>

  <section>
    <p>Oh hi! I'm Yannick Chenot, a French web developer contractor based in London.</p>
  </section>

  <section>
    <ul class="sidebar-nav">
        <li><a class="sidebar-nav-item" href="https://tech.osteel.me/pages/about">About</a></li>
    </ul>
  </section>

  <section>
    <h2>Search</h2>
    <form class="sidebar-nav-item sidebar-nav" action="https://tech.osteel.me/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
        <input class="form-input" type="text" name="q" placeholder="Search" />
    </form>
  </section>

  <section>
    <h2>Categories</h2>
    <nav class="sidebar-nav">
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/blog.html">Blog</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/contracting.html">Contracting</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/laravel.html">Laravel</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/local-environment.html">Local environment</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/misc.html">Misc</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/nginx.html">Nginx</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/php.html">PHP</a>

    </nav>
  </section>

    <section>
        <h2>Find me</h2>
        <ul class="sidebar-nav">
            <li><a class="sidebar-nav-item" href="http://www.osteel.me" target="_blank">Portfolio</a></li>
            <li><a class="sidebar-nav-item" href="https://github.com/osteel" target="_blank">GitHub</a></li>
            <li><a class="sidebar-nav-item" href="https://twitter.com/osteel" target="_blank">Twitter</a></li>
            <li><a class="sidebar-nav-item" href="https://uk.linkedin.com/in/yannickchenot" target="_blank">LinkedIn</a></li>
            <li><a class="sidebar-nav-item" href="http://instagram.com/osteel" target="_blank">Instagram</a></li>
            <li><a class="sidebar-nav-item" href="http://www.last.fm/user/OSteEL" target="_blank">last.fm</a></li>
        </ul>
    </section>

  <section>
    <h2>Feeds</h2>
    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">All posts&nbsp;
        [&nbsp;
 <a href="https://tech.osteel.me/feeds/atom.xml" rel="subscribe-atom">Atom</a>        &nbsp;
 <a href="https://tech.osteel.me/feeds/rss.xml" rel="subscribe-rss">RSS</a>        &nbsp;]
      </li>
    </ul>
  </section>

  <div class="sidebar-item">
    <p>
    <a href="https://twitter.com/osteel">&copy; @osteel</a> 2019
    </p>
    <p class="tiny-note">
      Powered by <a href="http://getpelican.com">Pelican</a> :: Theme based on <a class="muted" href="https://github.com/thomaswilley/pelicanyan">Pelicanyan</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://tech.osteel.me/" title="Home">osteel's blog</a>
            <small>Web development resources</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="posts">
<div class="post">
    <h1 class="post-title">
      How to start a new Laravel 5 project with Homestead - quick reference
    </h1>
    <span class="post-date">
      Last updated:
        2015/05/11
        <small>:: [ <a href="https://github.com/osteel/blog-tech-public/blame/master/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference.html">changelog</a> ]</small>
    </span>

    <p>I wrote this short get-started guide mainly for my own use, to have a reference handy to quickly set up a new Laravel project with a MySQL database. But as I felt the need to write it, one might find some interest in it as well.</p>
<p><strong>[UPDATE 11/05/2015]:</strong></p>
<p>As the use of Composer to install Homestead <a href="https://twitter.com/laravelphp/status/597797885628022784">has been deprecated</a> (at least it disappeared from the doc), this post is not using the <code>homestead</code> commands anymore.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>This is assuming <a href="http://laravel.com/docs/master/homestead" title="Laravel Homestead - Documentation">homestead is installed</a>.</p>
<p>If it is not the case, please follow the instructions first: once completed, you will have a fully provisioned virtual machine run by Vagrant and containing everything necessary to develop with Laravel in the best conditions (if you are having trouble following the different steps, here is a <a href="https://laracasts.com/series/laravel-5-fundamentals/episodes/2" title="Virtual Machines and Homestead">free Laracast video</a> that might explain it better).</p>
<p>If you have no idea what Vagrant is and why you need to install it along with something like VirtualBox, feel free to read <a href="/posts/2015/01/25/how-to-use-vagrant-for-local-web-development.html">the article I wrote on the subject</a>.</p>
<h3 id="a-note-about-ssh">A note about ssh</h3>
<p>Laravel's documentation suggests to add an alias to <em>ssh</em> the Homestead box more quickly. I personnally prefer to use an ssh config to that purpose, as it is intended to.</p>
<p>Update or create a <code>config</code> file in the <code>.ssh</code> folder of your home directory:</p>
<pre><code>vim ~/.ssh/config
</code></pre>
<p>Add the following content:</p>
<pre><code># Homestead
Host homestead
HostName 127.0.0.1
Port 2222
User vagrant
</code></pre>
<p>You can now access the Homestead machine from anywhere running:</p>
<pre><code>ssh homestead
</code></pre>
<h2 id="create-the-project">Create the project</h2>
<p>First add a new site to the <code>~/.homestead/Homestead.yaml</code> file:</p>
<pre><code>vim ~/.homestead/Homestead.yaml
</code></pre>
<p>Something like:</p>
<pre><code>sites:
    - map: site1.local
      to: /home/vagrant/projects/site1
    - map: new-site.local
      to: /home/vagrant/projects/new-site/public
</code></pre>
<p>Here we want to start a new Laravel project (arbitrarily called "new-site") so we point the root to the <code>public/</code> directory.</p>
<p>There is also another method, using the <code>serve</code> script, allowing to add a new project without having to edit <code>Homestead.yaml</code> nor to provision the box again. My preference goes to the first method because I like keep track of my existing projects in <code>Homestead.yaml</code>.</p>
<p>I don't specify the database in this file, because I don't want the databases to be reset every time I provision the Vagrant box. Speaking of which, we now need to run this command, from <code>~/Homestead/</code>:</p>
<pre><code>vagrant provision
</code></pre>
<p>or:</p>
<pre><code>vagrant up â€”-provision
</code></pre>
<p>if your box isn't running yet.</p>
<p>This will basically create the right Nginx config on the Vagrant box and restart Nginx in there (and, like I said, reset the databases that are declared in the <code>Homestead.yaml</code> file, so be careful. Simply remove the databases for which you don't want that to happen under <code>databases</code> from that file).</p>
<p>Now, edit the <code>hosts</code> file of your host machine (<code>sudo vim /etc/hosts</code> on MacOS) to match the new domain to the box's IP:</p>
<pre><code>192.168.10.10    new-site.local
</code></pre>
<p>Then, <code>ssh</code> the box and create your new project using Composer (in my config, all my projects are under the <code>~/projects/</code> directory of the Vagrant box) (this will probably take a little while):</p>
<pre><code>ssh homestead
cd projects
composer create-project laravel/laravel new-site
</code></pre>
<p>This will copy Laravel and all its dependencies in the <code>new-site</code> directory.</p>
<p>If everything went fine, you should now be able to access <a href="http://new-site.local">http://new-site.local</a> and see the default Laravel screen:</p>
<p><img alt="Laravel Welcome Screen" src="/images/2015/04/23/laravel-welcome.png" title="Laravel Welcome Screen" /></p>
<h2 id="set-up-the-database">Set up the database</h2>
<p>From the Homestead box, connect to MySQL and create the database with the right user (the password for <code>homestead</code> is "secret"):</p>
<pre><code>mysql -uhomestead -p
create database newsite;
grant usage on *.* to newsite@localhost identified by 'password';
grant all privileges on newsite.* to newsite@localhost;
flush privileges;
\q
</code></pre>
<p>Be sure to note the chosen password and edit the <code>.env</code> file of your project, changing the values for the database details:</p>
<pre><code>DB_HOST=localhost
DB_DATABASE=newsite
DB_USERNAME=newsite
DB_PASSWORD=password
</code></pre>
<p>Laravel comes with a couple of database migration scripts, creating the <code>users</code> and <code>password_resets</code> tables respectively. A quick way to check that the database is correctly set up is to run these scripts, from the project's root:</p>
<pre><code>php artisan migrate
</code></pre>
<p>If the migration is successful, you're all set! Reset the database if necessary:</p>
<pre><code>php artisan migrate:reset
</code></pre>
<p>That's it! A few quick steps to get started on a new Laravel project with Homestead.</p>

    <p class="meta">
      <small>
        Last updated by osteel on the
          <time datetime="2015-05-11T00:00:00+01:00" pubdate>2015/05/11</time>
          :: [
          <a href="https://tech.osteel.me/tag/laravel.html">laravel</a>
          <a href="https://tech.osteel.me/tag/homestead.html">homestead</a>
          ]
      </small>
    </p>

    <section>
      <h2>Comments</h2>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
    </section>
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>


      <script type="text/javascript">
        var disqus_shortname = "osteel";
              var disqus_identifier = "/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference";
              var disqus_url = "https://tech.osteel.me/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference";
              var disqus_title = "How to start a new Laravel 5 project with Homestead - quick reference";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
      </script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53994673-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53994673-2');
    ga('send', 'pageview');
</script>

     </div>
  </body>
</html>