<!DOCTYPE html>
<html lang="en">
  <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
    <link rel="shortcut icon" type="image/x-icon" href="https://tech.osteel.me/favicon.ico" />

    <meta name="author" content="Yannick Chenot"/>
    <meta property="og:image" content="https://tech.osteel.me/images/2015/04/23/laravel-welcome.png" />

    <meta name="google-site-verification" content="KhtQOQ0ZVgZ55KSEoXMOWo_seu_e_JbV6xBk_SuewYI" />

    <meta name="monetization" content="$ilp.uphold.com/miU94ZyFdQ6K">

    <title>How to start a new Laravel 5 project with Homestead - quick reference &mdash; osteel's blog</title>

    <meta charset="utf-8" />
    <link href="https://tech.osteel.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Full Atom Feed" />
    <link href="https://tech.osteel.me/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog Full RSS Feed" />
    <link href="https://tech.osteel.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Atom Feed" />
    <link href="https://tech.osteel.me/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog RSS Feed" />
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/poole.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/syntax.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/styles.css"/>

    <script
      type="text/javascript"
      src="https://platform-api.sharethis.com/js/sharethis.js#property=5e6053b434311400122fd1f8&product=inline-share-buttons"
      async="async">
    </script>



  <meta name="description" content="I wrote this short get-started guide mainly for my own use, to have a reference handy to quickly set up a new Laravel project with a MySQL database. But as I felt the need to write it, one might find some interest in it as well." />
  <meta name="twitter:description" content="I wrote this short get-started guide mainly for my own use, to have a reference handy to quickly set up a new Laravel project with a MySQL database. But as I felt the need to write it, one might find some interest in it as well.">

  <meta name="tags" content="laravel" />
  <meta name="tags" content="homestead" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@osteel">
  <meta name="twitter:creator" content="@osteel">
  <meta name="twitter:title" content="How to start a new Laravel 5 project with Homestead - quick reference">
  <meta name="twitter:image" content="https://tech.osteel.me/images/2015/04/23/laravel-welcome.png">

  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="https://www.gravatar.com/avatar/158eb527bb4ceb8e1a84e74b39815b71"/>
    </div>
  </div>

  <section>
    <p>Demat ! I'm Yannick, a senior backend developer based in Brighton, UK.</p>
  </section>

  <section>
    <ul class="sidebar-nav">
    </ul>
  </section>

  <section>
    <h2>Newsletter</h2>
    <form class="sidebar-nav-item sidebar-nav" action="https://osteel.us5.list-manage.com/subscribe/post?u=dda32a39af10ca5ed21d00084&amp;id=e1b6d5529d" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate>
      <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-input" placeholder="Email address" required>
      <input type="checkbox" value="" name="group[23889][2]" style="display:none" checked>
      <input type="submit" hidden />
      <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_dda32a39af10ca5ed21d00084_e1b6d5529d" tabindex="-1" value=""></div>
    </form>
  </section>

  <section>
    <h2>Categories</h2>
    <nav class="sidebar-nav">
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/blogging">Blogging</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/business">Business</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/devops">DevOps</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/laravel">Laravel</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/misc">Misc</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/php">PHP</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/productivity">Productivity</a>

    </nav>
  </section>

  <section>
    <h2>Search</h2>
    <form class="sidebar-nav-item sidebar-nav" action="https://tech.osteel.me/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
        <input class="form-input" type="text" name="q" placeholder="Search" />
    </form>
  </section>

    <section>
        <h2>Find me</h2>
        <ul class="sidebar-nav">
            <li><a class="sidebar-nav-item" href="https://github.com/osteel" target="_blank">GitHub</a></li>
            <li><a class="sidebar-nav-item" href="https://twitter.com/osteel" target="_blank">Twitter</a></li>
            <li><a class="sidebar-nav-item" href="https://www.linkedin.com/in/yannickchenot" target="_blank">LinkedIn</a></li>
        </ul>
    </section>

  <section>
    <h2>Feeds</h2>
    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">All posts&nbsp;
        [&nbsp;
 <a href="https://tech.osteel.me/feeds/atom.xml" rel="subscribe-atom">Atom</a>        &nbsp;
 <a href="https://tech.osteel.me/feeds/rss.xml" rel="subscribe-rss">RSS</a>        &nbsp;]
      </li>
    </ul>
  </section>

  <div class="sidebar-item">
    <p>
    <a href="https://twitter.com/osteel">&copy; @osteel</a> 2022
    </p>
    <p class="tiny-note">
      Powered by <a href="http://getpelican.com">Pelican</a> :: Theme based on <a class="muted" href="https://github.com/thomaswilley/pelicanyan">Pelicanyan</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://tech.osteel.me/" title="Home">osteel's blog</a>
            <small>Web development resources</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="posts">
<div class="post">
    <h1 class="post-title">
      How to start a new Laravel 5 project with Homestead - quick reference
    </h1>
    <span class="post-date">
      <small>
          Last updated: 2015-05-11 ::
        Published: 2015-04-23
          :: [ <a href="https://github.com/osteel/blog-tech-public/commits/master/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference.html">history</a> ]
      </small>
    </span>

    <section class="info">
      <span class="title">Been here before?</span>
      <form action="https://osteel.us5.list-manage.com/subscribe/post?u=dda32a39af10ca5ed21d00084&amp;id=e1b6d5529d" method="post" id="subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
        <label for="mce-EMAIL">Get notified of future posts by email:</label>
        <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-input" placeholder="email address" required>
        <input type="submit" value="Sign up" name="subscribe" id="mc-embedded-subscribe" class="form-button">
        <input type="checkbox" value="" name="group[23889][2]" style="display:none" checked>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_dda32a39af10ca5ed21d00084_e1b6d5529d" tabindex="-1" value=""></div>
      </form>
      <p>You can also subscribe to the <a href="https://tech.osteel.me/feeds/rss.xml" rel="subscribe-rss">RSS</a> or <a href="https://tech.osteel.me/feeds/atom.xml" rel="subscribe-atom">Atom</a> feed, or follow me on <a href="https://twitter.com/osteel">Twitter</a>.</p>
    </section>

    <p>I wrote this short get-started guide mainly for my own use, to have a reference handy to quickly set up a new Laravel project with a MySQL database. But as I felt the need to write it, one might find some interest in it as well.</p>
<p><strong>[UPDATE 11/05/2015]:</strong></p>
<p>As the use of Composer to install Homestead <a href="https://twitter.com/laravelphp/status/597797885628022784">has been deprecated</a> (at least it disappeared from the doc), this post is not using the <code>homestead</code> commands anymore.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>This is assuming <a href="http://laravel.com/docs/master/homestead" title="Laravel Homestead - Documentation">homestead is installed</a>.</p>
<p>If it is not the case, please follow the instructions first: once completed, you will have a fully provisioned virtual machine run by Vagrant and containing everything necessary to develop with Laravel in the best conditions (if you are having trouble following the different steps, here is a <a href="https://laracasts.com/series/laravel-5-fundamentals/episodes/2" title="Virtual Machines and Homestead">free Laracast video</a> that might explain it better).</p>
<p>If you have no idea what Vagrant is and why you need to install it along with something like VirtualBox, feel free to read <a href="/posts/2015/01/25/how-to-use-vagrant-for-local-web-development.html">the article I wrote on the subject</a>.</p>
<h3 id="a-note-about-ssh">A note about ssh</h3>
<p>Laravel's documentation suggests to add an alias to <em>ssh</em> the Homestead box more quickly. I personnally prefer to use an ssh config to that purpose, as it is intended to.</p>
<p>Update or create a <code>config</code> file in the <code>.ssh</code> folder of your home directory:</p>
<div class="highlight"><pre><span></span><span class="n">vim</span> <span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>
</pre></div>


<p>Add the following content:</p>
<div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">Homestead</span>
<span class="k">Host</span> <span class="n">homestead</span>
<span class="n">HostName</span> <span class="mi">127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span>
<span class="n">Port</span> <span class="mi">2222</span>
<span class="k">User</span> <span class="n">vagrant</span>
</pre></div>


<p>You can now access the Homestead machine from anywhere running:</p>
<div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">homestead</span>
</pre></div>


<h2 id="create-the-project">Create the project</h2>
<p>First add a new site to the <code>~/.homestead/Homestead.yaml</code> file:</p>
<div class="highlight"><pre><span></span><span class="n">vim</span> <span class="o">~/</span><span class="p">.</span><span class="n">homestead</span><span class="o">/</span><span class="n">Homestead</span><span class="p">.</span><span class="n">yaml</span>
</pre></div>


<p>Something like:</p>
<div class="highlight"><pre><span></span><span class="n">sites</span><span class="p">:</span>
    <span class="o">-</span> <span class="k">map</span><span class="p">:</span> <span class="n">site1</span><span class="p">.</span><span class="k">local</span>
      <span class="k">to</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">site1</span>
    <span class="o">-</span> <span class="k">map</span><span class="p">:</span> <span class="k">new</span><span class="o">-</span><span class="n">site</span><span class="p">.</span><span class="k">local</span>
      <span class="k">to</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="k">new</span><span class="o">-</span><span class="n">site</span><span class="o">/</span><span class="k">public</span>
</pre></div>


<p>Here we want to start a new Laravel project (arbitrarily called "new-site") so we point the root to the <code>public/</code> directory.</p>
<p>There is also another method, using the <code>serve</code> script, allowing to add a new project without having to edit <code>Homestead.yaml</code> nor to provision the box again. My preference goes to the first method because I like keep track of my existing projects in <code>Homestead.yaml</code>.</p>
<p>I don't specify the database in this file, because I don't want the databases to be reset every time I provision the Vagrant box. Speaking of which, we now need to run this command, from <code>~/Homestead/</code>:</p>
<div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">provision</span>
</pre></div>


<p>or:</p>
<div class="highlight"><pre><span></span><span class="n">vagrant</span> <span class="n">up</span> <span class="err">â€”</span><span class="o">-</span><span class="n">provision</span>
</pre></div>


<p>if your box isn't running yet.</p>
<p>This will basically create the right Nginx config on the Vagrant box and restart Nginx in there (and, like I said, reset the databases that are declared in the <code>Homestead.yaml</code> file, so be careful. Simply remove the databases for which you don't want that to happen under <code>databases</code> from that file).</p>
<p>Now, edit the <code>hosts</code> file of your host machine (<code>sudo vim /etc/hosts</code> on MacOS) to match the new domain to the box's IP:</p>
<div class="highlight"><pre><span></span><span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">10</span><span class="p">.</span><span class="mi">10</span>    <span class="k">new</span><span class="o">-</span><span class="n">site</span><span class="p">.</span><span class="k">local</span>
</pre></div>


<p>Then, <code>ssh</code> the box and create your new project using Composer (in my config, all my projects are under the <code>~/projects/</code> directory of the Vagrant box) (this will probably take a little while):</p>
<div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">homestead</span>
<span class="n">cd</span> <span class="n">projects</span>
<span class="n">composer</span> <span class="k">create</span><span class="o">-</span><span class="n">project</span> <span class="n">laravel</span><span class="o">/</span><span class="n">laravel</span> <span class="k">new</span><span class="o">-</span><span class="n">site</span>
</pre></div>


<p>This will copy Laravel and all its dependencies in the <code>new-site</code> directory.</p>
<p>If everything went fine, you should now be able to access <a href="http://new-site.local">http://new-site.local</a> and see the default Laravel screen:</p>
<p><img alt="Laravel Welcome Screen" src="/images/2015/04/23/laravel-welcome.png" title="Laravel Welcome Screen" /></p>
<h2 id="set-up-the-database">Set up the database</h2>
<p>From the Homestead box, connect to MySQL and create the database with the right user (the password for <code>homestead</code> is "secret"):</p>
<div class="highlight"><pre><span></span><span class="n">mysql</span><span class="w"> </span><span class="o">-</span><span class="n">uhomestead</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"></span>
<span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">newsite</span><span class="p">;</span><span class="w"></span>
<span class="k">grant</span><span class="w"> </span><span class="k">usage</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">newsite</span><span class="nv">@localhost</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">grant</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="k">privileges</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">newsite</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">newsite</span><span class="nv">@localhost</span><span class="p">;</span><span class="w"></span>
<span class="n">flush</span><span class="w"> </span><span class="k">privileges</span><span class="p">;</span><span class="w"></span>
<span class="err">\</span><span class="n">q</span><span class="w"></span>
</pre></div>


<p>Be sure to note the chosen password and edit the <code>.env</code> file of your project, changing the values for the database details:</p>
<div class="highlight"><pre><span></span><span class="n">DB_HOST</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">DB_DATABASE</span><span class="o">=</span><span class="n">newsite</span>
<span class="n">DB_USERNAME</span><span class="o">=</span><span class="n">newsite</span>
<span class="n">DB_PASSWORD</span><span class="o">=</span><span class="n">password</span>
</pre></div>


<p>Laravel comes with a couple of database migration scripts, creating the <code>users</code> and <code>password_resets</code> tables respectively. A quick way to check that the database is correctly set up is to run these scripts, from the project's root:</p>
<div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">artisan</span> <span class="n">migrate</span>
</pre></div>


<p>If the migration is successful, you're all set! Reset the database if necessary:</p>
<div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">artisan</span> <span class="n">migrate</span><span class="p">:</span><span class="k">reset</span>
</pre></div>


<p>That's it! A few quick steps to get started on a new Laravel project with Homestead.</p>

    <div class="sharethis-inline-share-buttons"></div>

    <section class="info">
      <span class="title">Enjoying the content?</span>
      <form action="https://osteel.us5.list-manage.com/subscribe/post?u=dda32a39af10ca5ed21d00084&amp;id=e1b6d5529d" method="post" id="subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
        <label for="mce-EMAIL">Get notified of future posts by email:</label>
        <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-input" placeholder="email address" required>
        <input type="submit" value="Sign up" name="subscribe" id="mc-embedded-subscribe" class="form-button">
        <input type="checkbox" value="" name="group[23889][2]" style="display:none" checked>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_dda32a39af10ca5ed21d00084_e1b6d5529d" tabindex="-1" value=""></div>
      </form>
      <p>You can also subscribe to the <a href="https://tech.osteel.me/feeds/rss.xml" rel="subscribe-rss">RSS</a> or <a href="https://tech.osteel.me/feeds/atom.xml" rel="subscribe-atom">Atom</a> feed, or follow me on <a href="https://twitter.com/osteel">Twitter</a>.</p>
    </section>

    <p class="meta">
      <small>
        Last updated by osteel on
          <time datetime="2015-05-11" pubdate>2015-05-11</time>
          :: [
          <a href="https://tech.osteel.me/tag/laravel">laravel</a>
          <a href="https://tech.osteel.me/tag/homestead">homestead</a>
          ]
      </small>
    </p>

    <section>
      <h2>Comments</h2>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
    </section>
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>


      <script type="text/javascript">
        var disqus_shortname = "osteel";
              var disqus_identifier = "/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference";
              var disqus_url = "https://tech.osteel.me/posts/how-to-start-a-new-laravel5-project-with-homestead-quick-reference";
              var disqus_title = "How to start a new Laravel 5 project with Homestead - quick reference";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
      </script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53994673-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53994673-2');
    ga('send', 'pageview');
</script>

     </div>
  </body>
</html>