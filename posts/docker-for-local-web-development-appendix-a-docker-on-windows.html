<!DOCTYPE html>
<html lang="en">
  <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
    <link rel="shortcut icon" type="image/x-icon" href="https://tech.osteel.me/favicon.ico" />

    <meta name="author" content="Yannick Chenot"/>
    <meta property="og:image" content="https://tech.osteel.me/images/2020/03/04/docker-appendix-a-01.jpg" />

    <meta name="google-site-verification" content="KhtQOQ0ZVgZ55KSEoXMOWo_seu_e_JbV6xBk_SuewYI" />

    <title>Docker for local web development, appendix A: Docker on Windows &mdash; osteel's blog</title>

    <meta charset="utf-8" />
    <link href="https://tech.osteel.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Full Atom Feed" />
    <link href="https://tech.osteel.me/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog Full RSS Feed" />
    <link href="https://tech.osteel.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="osteel's blog Atom Feed" />
    <link href="https://tech.osteel.me/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="osteel's blog RSS Feed" />
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/poole.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/syntax.css"/>
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="https://tech.osteel.me/theme/css/styles.css"/>

    <script
      type="text/javascript"
      src="https://platform-api.sharethis.com/js/sharethis.js#property=5e6053b434311400122fd1f8&product=inline-share-buttons"
      async="async">
    </script>




    <meta name="tags" contents="tutorial" />
    <meta name="tags" contents="docker" />
    <meta name="tags" contents="windows" />

  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="https://tech.osteel.me/theme/img/profile.jpg"/>
    </div>
  </div>

  <section>
    <p>Oh hi! I'm Yannick Chenot, a French web developer contractor based in London.</p>
  </section>

  <section>
    <ul class="sidebar-nav">
        <li><a class="sidebar-nav-item" href="https://tech.osteel.me/pages/about">About</a></li>
    </ul>
  </section>

  <section>
    <h2>Search</h2>
    <form class="sidebar-nav-item sidebar-nav" action="https://tech.osteel.me/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
        <input class="form-input" type="text" name="q" placeholder="Search" />
    </form>
  </section>

  <section>
    <h2>Categories</h2>
    <nav class="sidebar-nav">
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/blog">Blog</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/contracting.html">Contracting</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/docker">Docker</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/laravel.html">Laravel</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/misc.html">Misc</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/nginx">Nginx</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/php">PHP</a>
        <a class="sidebar-nav-item" href="https://tech.osteel.me/category/vagrant">Vagrant</a>

    </nav>
  </section>

    <section>
        <h2>Find me</h2>
        <ul class="sidebar-nav">
            <li><a class="sidebar-nav-item" href="https://www.osteel.me" target="_blank">Portfolio</a></li>
            <li><a class="sidebar-nav-item" href="https://github.com/osteel" target="_blank">GitHub</a></li>
            <li><a class="sidebar-nav-item" href="https://twitter.com/osteel" target="_blank">Twitter</a></li>
            <li><a class="sidebar-nav-item" href="https://uk.linkedin.com/in/yannickchenot" target="_blank">LinkedIn</a></li>
            <li><a class="sidebar-nav-item" href="http://instagram.com/osteel" target="_blank">Instagram</a></li>
            <li><a class="sidebar-nav-item" href="http://www.last.fm/user/OSteEL" target="_blank">last.fm</a></li>
        </ul>
    </section>

  <section>
    <h2>Feeds</h2>
    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">All posts&nbsp;
        [&nbsp;
 <a href="https://tech.osteel.me/feeds/atom.xml" rel="subscribe-atom">Atom</a>        &nbsp;
 <a href="https://tech.osteel.me/feeds/rss.xml" rel="subscribe-rss">RSS</a>        &nbsp;]
      </li>
    </ul>
  </section>

  <div class="sidebar-item">
    <p>
    <a href="https://twitter.com/osteel">&copy; @osteel</a> 2020
    </p>
    <p class="tiny-note">
      Powered by <a href="http://getpelican.com">Pelican</a> :: Theme based on <a class="muted" href="https://github.com/thomaswilley/pelicanyan">Pelicanyan</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://tech.osteel.me/" title="Home">osteel's blog</a>
            <small>Web development resources</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="posts">
<div class="post">
    <h1 class="post-title">
      Docker for local web development, appendix A: Docker on Windows
    </h1>
    <span class="post-date">
      <small>
          Last updated: 2020-03-30 ::
        Published: 2020-03-04
          :: [ <a href="https://github.com/osteel/blog-tech-public/commits/master/posts/docker-for-local-web-development-appendix-a-docker-on-windows.html">history</a> ]
      </small>
    </span>

    <p><img alt="Docker on Windows" src="/images/2020/03/04/docker-appendix-a-01.jpg" title="Docker on Windows" /></p>
<h2 id="in-this-series">In this series</h2>
<ul>
<li><a href="/posts/docker-for-local-web-development-introduction-why-should-you-care" title="Docker for local web development, introduction: why should you care?">Introduction: why should you care?</a></li>
<li><a href="/posts/docker-for-local-web-development-part-1-a-basic-lemp-stack" title="Docker for local web development, part 1: a basic LEMP stack">Part 1: a basic LEMP stack</a></li>
<li><a href="/posts/docker-for-local-web-development-part-2-put-your-images-on-a-diet" title="Docker for local web development, part 2: put your images on a diet">Part 2: put your images on a diet</a></li>
<li><a href="/posts/docker-for-local-web-development-part-3-a-three-tier-architecture-with-frameworks" title="Docker for local web development, part 3: a three-tier architecture with frameworks">Part 3: a three-tier architecture with frameworks</a></li>
<li>Part 4: smoothing things out with Bash <em>(coming soon)</em></li>
<li>Part 5.1: HTTPS all the things with a self-signed certificate <em>(coming soon)</em></li>
<li>Part 5.2: HTTPS all the things with a trusted Certificate Authority <em>(coming soon)</em></li>
<li>Part 6: expose a local container to the Internet <em>(coming soon)</em></li>
<li>Part 7: using a multi-stage build to introduce a worker <em>(coming soon)</em></li>
<li>Conclusion: where to go from here <em>(coming soon)</em></li>
<li>Appendix A: Docker on Windows <strong>⬅️ you are here</strong></li>
</ul>
<p>Subscribe to email alerts at the end of this article or follow me on <a href="https://twitter.com/osteel">Twitter</a> to be informed of new publications.</p>
<h2 id="in-this-post">In this post</h2>
<div class="toc">
<ul>
<li><a href="#in-this-series">In this series</a></li>
<li><a href="#in-this-post">In this post</a></li>
<li><a href="#why-this-appendix">Why this appendix?</a></li>
<li><a href="#minimum-requirements">Minimum requirements</a></li>
<li><a href="#docker-desktop">Docker Desktop</a></li>
<li><a href="#virtualisation-hyper-v-and-virtualbox">Virtualisation, Hyper-V and VirtualBox</a></li>
<li><a href="#terminal">Terminal</a></li>
<li><a href="#local-folder-and-disk-sharing">Local folder and disk sharing</a></li>
<li><a href="#ports">Ports</a></li>
<li><a href="#other-resources-and-fixes">Other resources and fixes</a></li>
<li><a href="#something-missing">Something missing?</a></li>
</ul>
</div>
<h2 id="why-this-appendix">Why this appendix?</h2>
<p>You might have heard some rumours claiming Docker is a bit of a pain to run on Windows. The bad new is these rumours are mostly true. All is not lost, however: most hurdles come with little tricks that, once known and applied, make the experience of Docker on Windows almost the same as a Unix-based system.</p>
<p>This appendix is about those little tricks, which should allow you to complete the entirety of this tutorial series and run the final result smoothly on Microsoft's OS.</p>
<p>Note that this appendix is <strong>not</strong> about Windows-based containers.</p>
<h2 id="minimum-requirements">Minimum requirements</h2>
<p>Docker cannot run on any version of Windows. The minimum requirements are listed in the <a href="https://docs.docker.com/docker-for-windows/install/#what-to-know-before-you-install">Docker documentation</a> and, at the time of writing, they indicate your system should run <strong>at least Windows 10 64-bit  Pro, Enterprise, or Education</strong>, because of Docker's virtualisation needs.</p>
<h2 id="docker-desktop">Docker Desktop</h2>
<p>If you haven't already, download and install <a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a>, which is essentially a virtual machine running Docker and Docker Compose.</p>
<p>Make sure <strong>not to</strong> tick <em>Use Windows containers instead of Linux containers</em> during installation.</p>
<h2 id="virtualisation-hyper-v-and-virtualbox">Virtualisation, Hyper-V and VirtualBox</h2>
<p>Docker requires hardware virtualisation capabilities to function properly, which on Windows are provided for by Hyper-V. If your system satisfies the aforementioned requirements, Hyper-V is probably already enabled; if Docker seems to think otherwise, head <a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">over here</a> for instructions about how to activate it.</p>
<p>Once Hyper-V is running, you might notice that VirtualBox doesn't work anymore: it is essentially because Hyper-V transforms Windows into a virtual machine on which VirtualBox cannot run. As a result, <strong>you can't use Docker and VirtualBox at the same time</strong>, and you will need a system restart to switch from one to the other (this also applies to other level 2 hypervisors like VMware).</p>
<p>Having said this, you may not have to choose between the two: what you need VirtualBox for may also be compatible with Hyper-V (like <a href="https://laravel.com/docs/homestead#installation-and-setup">Homestead</a>, for instance).</p>
<p>If you are interested in the subject, you can read more about <a href="https://docs.microsoft.com/en-us/virtualization/#pivot=main&amp;panel=windows">virtualisation on Windows</a>, and about the <a href="https://superuser.com/a/1208857">conflicts between Hyper-V and VirtualBox</a>.</p>
<h2 id="terminal">Terminal</h2>
<p>The people at Docker seem to be focusing on Docker Desktop's UI at the moment, and I wouldn't be surprised if everything we currently do in a terminal ends up being available on the dashboard. For the time being, however, using a terminal is still (and will most likely always be, in my opinion) the easiest way to use Docker.</p>
<p>To be able to follow this tutorial series in optimal conditions, you will need a command line interface featuring Bash, for which I recommend using <a href="https://gitforwindows.org/">Git Bash</a>, whose name is rather indicative of what it ships with. You will then be able to run regular Docker commands and execute some Bash scripts when we get to that.</p>
<p>You need to pay attention to a couple of options while installing the software. The first one is about line endings, for which you should select <em>Checkout as-is</em>:</p>
<p><img alt="Git line endings" src="/images/2020/03/04/docker-appendix-a-02.png" title="Git line endings" /></p>
<p>If you don't, you will run into trouble when we get to using Bash scripts.</p>
<p>The other one is the terminal emulator:</p>
<p><img alt="Git console window" src="/images/2020/03/04/docker-appendix-a-03.png" title="Git console window" /></p>
<p>Make sure to select <em>Use Windows' default console window</em>; if you don't, you will have to prepend any Docker command with <code>winpty</code>. This is a <a href="https://github.com/docker/for-win/issues/1588">long standing issue</a> that makes using the albeit nicer MinTTY a pain, although it seems Windows' console has improved with Windows 10 (<a href="https://willi.am/blog/2016/08/08/docker-for-windows-interactive-sessions-in-mintty-git-bash/" title="Docker for Windows: Interactive Sessions in MinTTY Git Bash">source</a>).</p>
<p>If you also intend to clone the <a href="https://github.com/osteel/docker-tutorial">GitHub repository</a> coming with the series, you can run Git commands from the same terminal, provided an SSH key is set up. If you already use a GIT GUI like <a href="https://www.gitkraken.com">GitKraken</a>, you can skip this part; otherwise, open Git Bash and run the following command:</p>
<p><code>$ ls -l ~/.ssh</code></p>
<p>If you don't see a couple of files named <code>id_rsa</code> and <code>id_rsa.pub</code> or if the folder doesn't exist, run the following command and hit <em>return</em> at every prompt:</p>
<p><code>$ ssh-keygen -o</code></p>
<p>This will basically generate a public/private RSA key pair so Git Bash can interact with GitHub via SSH.</p>
<p>Run the following command to display your public key and copy the result:</p>
<p><code>$ cat ~/.ssh/id_rsa.pub</code></p>
<p>Paste it as a new SSH key in your <a href="https://github.com/settings/keys">GitHub settings</a>.</p>
<p>Your Git Bash is now set!</p>
<h2 id="local-folder-and-disk-sharing">Local folder and disk sharing</h2>
<p>You will need to share the local drive containing your Docker projects with Docker, which you can do in the <a href="https://docs.docker.com/docker-for-windows/troubleshoot/#shared-drives">application's settings</a>.</p>
<p>Note that based on your Docker Desktop version, you might get prompted for your account's password and an empty string won't be accepted. Meaning if you don't have a password for your account, you will probably have to set one first.</p>
<h2 id="ports">Ports</h2>
<p>The local setup needs port 80 to be available, but it might already be in use (which will most likely prevent the Nginx container from starting properly).</p>
<p>A quick way to free up the port is to run the following command as admin (from Command Prompt, not from Git Bash):</p>
<p><code>$ net stop http /y</code></p>
<p>If you still have issues, have a look at <a href="http://www.devside.net/wamp-server/opening-up-port-80-for-apache-to-use-on-windows">this article</a>.</p>
<p>Based on the way you intend to access the database, you might also need to free up port 3306 (unless you plan on using phpMyAdmin).</p>
<h2 id="other-resources-and-fixes">Other resources and fixes</h2>
<p>If you encounter other issues, some of these resources might help:</p>
<ul>
<li><a href="https://docs.docker.com/docker-for-windows/">Get started with Docker for Windows</a>;</li>
<li><a href="https://docs.docker.com/docker-for-windows/troubleshoot/">Logs and troubleshooting</a>;</li>
<li><a href="https://github.com/docker/for-win/issues/1936">Extremely slow on Windows 10</a>;</li>
<li><a href="https://github.com/docker/for-win/issues/3171">Unable to bind ports</a>;</li>
<li><a href="https://github.com/docker/for-mac/issues/3785">Error with docker-compose: docker-credential-desktop not installed or not available in PATH</a>.</li>
</ul>
<h2 id="something-missing">Something missing?</h2>
<p>This guide should be enough to get you going with this tutorial series; that being said, I work on a Mac and don't have regular access to a Windows machine, so if anything seemingly Microsoft-related happens I won't be of much assistance.</p>
<p>If you come across an issue and find a way to solve it, please let me know in the comments and I will consider amending this guide. <a href="https://github.com/osteel/docker-tutorial">Pull requests are also always welcome</a>.</p>
<p>All set? You can now proceed with the <a href="/posts/docker-for-local-web-development-part-1-a-basic-lemp-stack" title="Docker for local web development, part 1: a basic LEMP stack">first part</a> of this series.</p>

    <p class="meta">
      <small>
        Last updated by osteel on the
          <time datetime="2020-03-30" pubdate>2020-03-30</time>
          :: [
          <a href="https://tech.osteel.me/tag/tutorial">tutorial</a>
          <a href="https://tech.osteel.me/tag/docker">docker</a>
          <a href="https://tech.osteel.me/tag/windows">windows</a>
          ]
      </small>
    </p>

    <div class="sharethis-inline-share-buttons"></div>

    <section>
      <h2>Like this?</h2>
      <form action="https://osteel.us5.list-manage.com/subscribe/post?u=dda32a39af10ca5ed21d00084&amp;id=e1b6d5529d" method="post" id="subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
        <label for="mce-EMAIL">Get notified of future posts by email:</label>
        <input type="email" value="" name="EMAIL" id="mce-EMAIL" class="form-input" placeholder="email address" required>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="form-button">
        <input type="checkbox" value="" name="group[23889][2]" style="display:none" checked>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_dda32a39af10ca5ed21d00084_e1b6d5529d" tabindex="-1" value=""></div>
        <p class="tiny-note">You can unsubscribe at any time by clicking the link in the footer of the emails.<br>By clicking to subscribe, you acknowledge that your email address will be transferred to Mailchimp for processing.<br>Learn more about Mailchimp's privacy practices <a href="https://mailchimp.com/legal/" target="_blank">here</a>.</p>
      </form>
    </section>

    <section>
      <h2>Comments</h2>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
    </section>
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>


      <script type="text/javascript">
        var disqus_shortname = "osteel";
              var disqus_identifier = "/posts/docker-for-local-web-development-appendix-a-docker-on-windows";
              var disqus_url = "https://tech.osteel.me/posts/docker-for-local-web-development-appendix-a-docker-on-windows";
              var disqus_title = "Docker for local web development, appendix A: Docker on Windows";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
      </script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53994673-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53994673-2');
    ga('send', 'pageview');
</script>

     </div>
  </body>
</html>